# 在建構子中拋出異常

建構子沒有回傳值，無法使用「傳統錯誤處理機制：使用回傳碼」的方式來確認建構子是否執行成功。

畢竟建構子不是函式。

----

### 雙階段建構(two-stage construction)

- 將有可能產生錯誤的程式碼移出建構子，各自組成函式。

必須先呼叫建構子，然後呼叫那些可能產生錯誤的程式碼，然後再檢查回傳碼或捕捉異常。

- 使用內部旗標(internal flag)：如果建構子失敗，就設置旗標表示這個物件處於無效狀態。

內部旗標方法1：在呼叫物件的任何函式之前，先檢查該旗標。

內部旗標方法2：物件的每個函式都先檢查該旗標。

但是上述方式都缺少所謂的強固性(robustness)，都要求使用者得先做額外的事。

----

### 直接在建構子內拋出異常

較為直接，且不費工。